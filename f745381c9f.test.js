// Test generated by RoostGPT for test ExpressJs using AI Type Open AI and AI Model gpt-4
const express = require("express");
const path = require("path");
const mongoose = require("mongoose");
const cookieParser = require("cookie-parser");
const jwt = require("jsonwebtoken");
const bcrypt = require("bcrypt");
const request = require('supertest');
const app = require('./index.js');



app.get('./isAuthenticated', () => {
  return (req, res, next) => {
    req.user = { name: 'Test User' };
    next();
  };
});

describe('GET /', () => {
  test('should return 200 and render view with user name', async () => {
    const res = await request(app).get('/');
    expect(res.status).toBe(200);
    expect(res.text).toContain('Test User');
  });

  test('should return 500 when there is an error', async () => {
    jest.mock('./isAuthenticated', () => {
      return (req, res, next) => {
        next(new Error('Mock error'));
      };
    });
    const res = await request(app).get('/');
    expect(res.status).toBe(500);
  });
});

