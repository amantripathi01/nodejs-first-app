// ********RoostGPT********
// Test generated by RoostGPT for test aman12Feb using AI Type Open AI and AI Model gpt-4



// ********RoostGPT********
import express from "express";
import path from "path";
import mongoose from "mongoose";
import cookieParser from "cookie-parser";
import jwt from "jsonwebtoken";
import bcrypt from "bcrypt";
import request from 'supertest';
import app from './index';

jest.mock('jsonwebtoken');
jest.mock('bcrypt');

describe('GET /', () => {
  beforeEach(() => {
    jwt.verify.mockImplementation(() => ({name: 'John Doe'}));
  });

  afterEach(() => {
    jest.clearAllMocks();
  });

  test('should render logout page with user name when authenticated', async () => {
    const res = await request(app).get('/');
    expect(res.statusCode).toEqual(200);
    expect(res.text).toContain('John Doe');
  });

  test('should return error when not authenticated', async () => {
    jwt.verify.mockImplementation(() => { throw new Error(); });
    const res = await request(app).get('/');
    expect(res.statusCode).toEqual(401);
  });
});
