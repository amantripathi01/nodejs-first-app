// Test generated by RoostGPT for test ExpressJs using AI Type Open AI and AI Model gpt-4

import express from "express";
import path from "path";
import mongoose from "mongoose";
import cookieParser from "cookie-parser";
import jwt from "jsonwebtoken";
import bcrypt from "bcrypt"; 
import request from "supertest";
import app from "./index";

describe('GET /', () => {
  let user;

  beforeEach(() => {
    user = {
      name: 'John Doe',
      isAuthenticated: true,
    };
  });

  test('it should return user name if user is authenticated', async () => {
    const req = { user };
    const res = {
      render: jest.fn()
    };

    app.get("/", isAuthenticated, (req, res) => {
      res.render("logout", {
        name: req.user.name
      });
    });

    await request(app)
      .get('/')
      .expect(200);

    expect(res.render).toHaveBeenCalledWith('logout', { name: 'John Doe' });
  });

  test('it should return 401 if user is not authenticated', async () => {
    user.isAuthenticated = false;

    const req = { user };
    const res = {
      render: jest.fn()
    };

    app.get("/", isAuthenticated, (req, res) => {
      res.render("logout", {
        name: req.user.name
      });
    });

    await request(app)
      .get('/')
      .expect(401);

    expect(res.render).not.toHaveBeenCalled();
  });
});
